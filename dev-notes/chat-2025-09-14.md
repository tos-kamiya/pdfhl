# Academic paper highlighting

**User:** Toshihiro Kamiya (tos.kamiya@gmail.com)  
**Created:** 9/14/2025 12:39:38  
**Updated:** 9/14/2025 13:17:40  
**Exported:** 9/14/2025 13:18:22  
**Link:** [https://chatgpt.com/c/68c638f7-8f80-832c-b06d-4fe8e9fbca08](https://chatgpt.com/c/68c638f7-8f80-832c-b06d-4fe8e9fbca08)  

## Prompt:
prompt-paper-highlitht.txt

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

pdftopages

ãƒ•ã‚¡ã‚¤ãƒ«

README.md

ãƒ•ã‚¡ã‚¤ãƒ«

ã„ã¾ã€PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’å—ã‘å–ã‚Šã€æŒ‡å®šã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã«ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ã¤ã‘ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã„ã¾ã™ã€‚ä»•æ§˜ã¯ README.md ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ã“ã®READMEã«ã€ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸç›®çš„ã§ã‚ã‚‹ã€å­¦è¡“è«–æ–‡ã®é‡è¦ãªéƒ¨åˆ†ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ã¤ã‘ã‚‹ã¨ã„ã†åˆ©ç”¨æ³•ã‚’ã¤ã‘ãŸã„ã¨æ€ã„ã¾ã™ã€‚ãã®ãŸã‚ã«åˆ©ç”¨ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒ extra-utils/ã«ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ pdfpages ã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ prompt-paper-highlitht.txt ã§ã™ã€‚
è‡ªåˆ†ã®ç’°å¢ƒã§ã¯ã€pdfpagesã‚’ãƒ‘ã‚¹ãŒé€šã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãŠã„ã¦ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«åã ã‘å¤‰æ›´ã—ãŸã‚‚ã®ã‚’ã€codexã‚„gemini-cliã«å…¥åŠ›ã—ã¦ã„ã¾ã™ã€‚

## Response:
æ€è€ƒæ™‚é–“: 13s

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™

We need to revise the README to clarify the tool's purpose, which involves using extra-utils/pdfpages to highlight key parts of academic papers. The filename in question has a typo ("highlitht"); I'll keep the name as is since that's what was uploaded. We'll propose an updated section of the README text accordingly.

We need to include inline citations in the response where content is referenced. I'll provide a Markdown snippet in English for the README update, as the user prefers structured English. The section will detail the "Academic Paper Highlighting Workflow" with CLI snippets, references to extra-utils/pdfpages, the prompt file, and environment setup (pdfpages in PATH). I'll include the necessary citations for the color scheme and tool usage.

We should note that "pdftopages" is the actual file, even though the user referenced "pdfpages." I'll use "pdftopages" in the README section but mention this alias for clarity. I'll also provide a generic example of interacting with codex or gemini-cli, and handle exit codes. Citations will be added inline as specified.

å®Œäº†

äº†è§£ã§ã™ã€‚README ã«ãã®åˆ©ç”¨ç›®çš„ã¨å®Ÿé‹ç”¨æ‰‹é †ã‚’è¿½è¨˜ã§ãã‚‹ã‚ˆã†ã€è²¼ã‚Šä»˜ã‘ç”¨ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¡ˆã‚’ç”¨æ„ã—ã¾ã—ãŸï¼ˆè‹±èªï¼‰ã€‚`extra-utils/` ã® `pdftopages` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ `prompt-paper-highlitht.txt` ã‚’ä½¿ã£ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ãã—ã¦ `pdfhl` ã§ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆé©ç”¨ã¾ã§ã‚’ä¸€æ°—é€šè²«ã§èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚å¿…è¦ãªã‚‰è¦‹å‡ºã—åã‚„ã‚³ãƒãƒ³ãƒ‰ä¾‹ã®ãƒ‘ã‚¹ã‚’èª¿æ•´ã—ã¦ãã ã•ã„ã€‚

* * *

Using This Tool for Academic Paper Highlighting
===============================================

This tool was originally built to help **highlight important parts of academic papers**â€”so you can quickly review _approach_, _experiment_, and _threats to validity_ sections across long PDFs.

Below is a lightweight workflow that combines:

*   `extra-utils/pdftopages` to extract per-page Markdown,
*   an LLM prompt (`extra-utils/prompt-paper-highlitht.txt`) to identify key sentences per page, and
*   `pdfhl` to apply highlights to the original PDF.

Workflow Overview
-----------------

1.  **Split the paper into page-wise Markdown**

Use the `pdftopages` helper to extract each pageâ€™s text to `BASE-nnn.md` files:

```bash
pdftopages path/to/paper.pdf ./pages/page
# -> ./pages/page-001.md, ./pages/page-002.md, ...
```

This produces one Markdown file per page (e.g., `BASE-001.md`, `BASE-002.md`), which youâ€™ll feed to your LLM to decide what to highlight.

prompt-paper-highlitht

2.  **Ask an LLM to mark important sentences**

Place `extra-utils/prompt-paper-highlitht.txt` somewhere convenient and pipe each pageâ€™s Markdown into your LLM CLI (e.g., `codex`, `gemini-cli`). For example:

```bash
# Example with gemini-cli
for f in ./pages/page-*.md; do
  cat extra-utils/prompt-paper-highlitht.txt "$f" \
  | gemini-cli --model gemini-2.0-flash \
  | tee "out/${f##*/}.highlights.jsonl"
done
```

Notes:

*   In our environment, we keep `pdftopages` on `PATH` and only change the **prompt file name** as needed, then paste or pipe it into `codex` or `gemini-cli` as above.
*   The LLM output should list phrases/sentences to highlight per color bucket (you can choose your own structureâ€”JSON, JSONL, or a simple listâ€”depending on how you post-process it in the next step).
    3.  **Apply highlights to the original PDF with `pdfhl`**

Once you have the phrases, use `pdfhl` to highlight them on the original PDF. You can call `pdfhl` once per phrase, or generate a single JSON â€œrecipeâ€ and run it in one go:

```bash
# Single phrase example (shortest match by default)
pdfhl paper.pdf --text "our approach is to ..." --color blue -o paper.hl.pdf

# All matches with a label
pdfhl paper.pdf --text "we evaluate on ..." --all-matches --color green --label "Experiment" -o paper.hl.pdf

# Recipe mode (multiple items at once)
pdfhl paper.pdf --recipe out/recipe.json -o paper.hl.pdf
```

Key CLI options include `--all-matches`, `--label`, `--color`, and `--opacity`; the tool never overwrites your input PDF and writes to a new file (default `<input>.highlighted.pdf`). See `pdfhl --help` for details.

README

Suggested Color Mapping
-----------------------

When prompting the LLM and assembling your `pdfhl` recipe, use these colors consistently:

*   **Blue** â€” Sentences that describe the **approach**
*   **Green** â€” Sentences that describe the **experiment**
*   **Red** â€” Sentences that discuss **threats to validity**
    prompt-paper-highlitht

Minimal End-to-End Example
--------------------------

```bash
# 0) Prepare
mkdir -p pages out

# 1) Extract page texts
pdftopages paper.pdf ./pages/page

# 2) Generate highlight candidates with an LLM (per page)
for f in ./pages/page-*.md; do
  cat extra-utils/prompt-paper-highlitht.txt "$f" \
  | codex --model gpt-4o-mini \
  | tee "out/${f##*/}.jsonl"
done

# 3) Convert JSONL to a pdfhl recipe (your small script here)
python extra-utils/jsonl_to_pdfhl_recipe.py out/*.jsonl > out/recipe.json

# 4) Apply highlights
pdfhl paper.pdf --recipe out/recipe.json -o paper.highlighted.pdf
```

> Tip: If a sentence fails to match due to PDF quirks (line breaks, ligatures, hyphenation), `pdfhl`â€™s **progressive phrase matching** and **tolerant normalization** usually still find it. If not, try shortening the phrase or lowering strictness in your prompt.
> 
> README

* * *

å¿…è¦ã«å¿œã˜ã¦ã€æ—¥æœ¬èªç‰ˆã®åŒç­‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚‚ç”¨æ„ã—ã¾ã™ã€‚README ã«çµ„ã¿è¾¼ã‚€å½¢å¼ã‚„ã€`jsonl_to_pdfhl_recipe.py` ã®å‡ºåŠ›ä»•æ§˜ï¼ˆ`pdfhl --recipe` å½¢å¼ï¼‰ãªã©ã€ãƒªãƒã‚¸ãƒˆãƒªã®æµå„€ã«åˆã‚ã›ã¦å¾®èª¿æ•´ã—ã¦ãã ã•ã„ã€‚

## Prompt:
ã¯ã„ã€ç¢ºã‹ã«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨ã—ã¦ã¦æ›¸ãä¸‹ã™ã¨ã“ã†ãªã‚‹ã¨æ€ã†ã®ã§ã™ãŒã€codexã‚„gemini-cliã§ã‚„ã‚‹ã¨ã€ã“ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã ã‘ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã¿ç«‹ã¦ã¦ãã‚Œã‚‹ã®ã§ã€åˆ©ç”¨è€…ã¨ã—ã¦ã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€ã“ã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ãã®ã‚ˆã†ãªè¨˜è¿°ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚

## Response:
README ã«è¿½è¨˜ã™ã‚‹ãªã‚‰ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’åˆ†è§£ã—ã¦èª¬æ˜ã™ã‚‹ã®ã§ã¯ãªãã€ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§å®Œçµã™ã‚‹ã€ã¨ã„ã†åˆ©ç”¨ä½“é¨“ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã™ã‚‹ã¨ã‚ˆã„ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŒ¿å…¥ã™ã‚Œã°ã€codex ã‚„ gemini-cli ã‚’ä½¿ã†åˆ©ç”¨è€…ãŒè¿·ã‚ãšã«æ¸ˆã¿ã¾ã™ã€‚

* * *

Academic Paper Highlighting
---------------------------

A key purpose of this tool is to **highlight important parts of academic papers**â€”approach, experiment, and threats to validityâ€”so that you can review them quickly.

Thanks to the helper prompt and script in `extra-utils/`, you donâ€™t need to orchestrate the workflow yourself. Simply provide the prompt to your LLM CLI (e.g., codex or gemini-cli) and it will automatically guide the full process:

1.  Split the PDF into page-wise text using `pdftopages`.
2.  Identify the important sentences on each page according to the rules in `prompt-paper-highlitht.txt`:
    *   **Blue** â€” Approach
    *   **Green** â€” Experiment
    *   **Red** â€” Threats to validity
        prompt-paper-highlitht
3.  Call `pdfhl` to apply the highlights on the original PDF
    README
    .

### How to Run

In practice, you only need to feed the prompt to your LLM CLI:

```bash
cat extra-utils/prompt-paper-highlitht.txt | gemini-cli --model gemini-2.0-flash
```

or

```bash
cat extra-utils/prompt-paper-highlitht.txt | codex --model gpt-4o-mini
```

The model interprets the prompt, runs the required steps with `pdftopages` and `pdfhl`, and produces a highlighted PDF. No manual scripting or multi-step command chaining is neededâ€”the prompt itself encodes the workflow.

* * *

ã“ã‚Œã§ã€Œåˆ©ç”¨è€…ã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã‚ˆã„ã€ã¨ã„ã†ç‰¹å¾´ãŒ README ã«æ˜ç¢ºã«æ›¸ãè¾¼ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã”å¸Œæœ›ãªã‚‰æ—¥æœ¬èªç‰ˆã®åŒç­‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚‚ç”¨æ„ã—ã¾ã™ã‹ï¼Ÿ

## Prompt:
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚å®Ÿéš›ã«ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æœ€åˆã®ã€Œ{file.pdf}ã€ã®éƒ¨åˆ†ã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€å¯¾è©±çš„ã«ãƒãƒãƒãƒã‚„ã£ã¦ã„ã¾ã™ã€‚
ã‚ã¾ã‚Šè‡ªå‹•åŒ–ã‚’è€ƒãˆãšã«ã€codexã‚„gemini-cliã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä¿®æ­£ã—ã¦ã€ã¨ã„ã£ãŸé¢¨ã«æ›¸ã„ã¦ãã ã•ã„ã€‚

## Response:
æ‰¿çŸ¥ã—ã¾ã—ãŸã€‚ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãã®ã¾ã¾ LLM ã«å…¥åŠ›ã—ã¦ã€å¿…è¦ã«å¿œã˜ã¦ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã¡ã‚‡ã£ã¨ç›´ã™ã ã‘ã€ã¨ã„ã†ã‚¹ã‚¿ã‚¤ãƒ«ã§æ›¸ãç›´ã—ã¾ã—ãŸã€‚README ã«è¿½è¨˜ã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¡ˆã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

* * *

Academic Paper Highlighting
---------------------------

One of the main use cases for this tool is to **highlight important sections of academic papers** (approach, experiment, threats to validity) for quick review.

We provide a helper script and prompt under `extra-utils/`:

*   `extra-utils/pdftopages` â€“ splits a PDF into per-page text (Markdown).
*   `extra-utils/prompt-paper-highlitht.txt` â€“ instructs the LLM how to identify and highlight sentences.

### How to Use (Interactive, Minimal Setup)

Instead of writing a full workflow script, you can simply **open your LLM CLI (codex, gemini-cli, etc.)** and paste in the prompt.

1.  Copy the contents of `extra-utils/prompt-paper-highlitht.txt`.
2.  Replace the placeholder `{file.pdf}` at the top with the actual filename of your paper.
3.  Paste it into your LLM CLI session (e.g., codex, gemini-cli).
4.  The LLM will walk you through the stepsâ€”calling `pdftopages`, deciding what to highlight, and applying highlights with `pdfhl`.

This is intentionally interactive: you â€œpokeâ€ the CLI with the prompt and tweak the filename as needed. No additional automation is required.

### Highlight Color Convention

The provided prompt uses three colors:

*   **Blue** â€” Approach
*   **Green** â€” Experiment
*   **Red** â€” Threats to validity
    prompt-paper-highlitht

* * *

ã“ã®æ›¸ãæ–¹ãªã‚‰ã€Œãƒ•ã‚¡ã‚¤ãƒ«åã‚’æ¯å›ã¡ã‚‡ã£ã¨ç›´ã—ã¦å…¥åŠ›ã™ã‚‹ã€ã¨ã„ã†ä½¿ã„æ–¹ã«ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ğŸ‘‰ README ã«è¼‰ã›ã‚‹å ´åˆã€æ—¥æœ¬èªç‰ˆã®èª¬æ˜ã‚‚è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ

## Prompt:
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚extra-utils/pdfpagesã‚’ãƒ‘ã‚¹ãŒé€šã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ãã‹ã€ã‚ã‚‹ã„ã¯ã€ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¸ã®ãƒ‘ã‚¹ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ›¸ãè¾¼ã‚€å¿…è¦ãŒã‚ã‚‹ã¨ã„ã†ã®ã‚‚è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚

## Response:
ãªã‚‹ã»ã©ï¼ã§ã¯ã€`extra-utils/pdftopages` ã®é…ç½®ã‚„ãƒ‘ã‚¹æŒ‡å®šãŒå¿…è¦ãªç‚¹ã‚‚ç››ã‚Šè¾¼ã¿ã¾ã—ãŸã€‚README ã«è¿½è¨˜ã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ”¹è¨‚ã—ãŸæ¡ˆã‚’ç¤ºã—ã¾ã™ã€‚

* * *

Academic Paper Highlighting
---------------------------

One of the main use cases for this tool is to **highlight important sections of academic papers** (approach, experiment, threats to validity) for quick review.

We provide a helper script and prompt under `extra-utils/`:

*   `extra-utils/pdftopages` â€“ splits a PDF into per-page text (Markdown).
*   `extra-utils/prompt-paper-highlitht.txt` â€“ instructs the LLM how to identify and highlight sentences.

### How to Use (Interactive, Minimal Setup)

Instead of writing a full workflow script, you can simply **open your LLM CLI (codex, gemini-cli, etc.)** and paste in the prompt.

1.  Copy the contents of `extra-utils/prompt-paper-highlitht.txt`.
2.  Replace the placeholder `{file.pdf}` at the top with the actual filename of your paper.
3.  Paste it into your LLM CLI session (e.g., codex, gemini-cli).
4.  The LLM will walk you through the stepsâ€”calling `pdftopages`, deciding what to highlight, and applying highlights with `pdfhl`.

> **Note:** You must either
> 
> *   place `extra-utils/pdftopages` in a directory included in your `$PATH`, **or**
> *   edit the prompt so that it calls `pdftopages` using its full path.
>     

This is intentionally interactive: you â€œpokeâ€ the CLI with the prompt, adjust the filename or script path as needed, and let the LLM handle the rest. No additional automation is required.

### Highlight Color Convention

The provided prompt uses three colors:

*   **Blue** â€” Approach
*   **Green** â€” Experiment
*   **Red** â€” Threats to validity
    prompt-paper-highlitht

* * *

ã“ã®å½¢ã§ README ã«è¿½è¨˜ã™ã‚Œã°ã€åˆ©ç”¨è€…ãŒã€Œãƒ‘ã‚¹ã‚’é€šã™ã‹ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã€ã¨ã„ã†ç‚¹ã‚‚è¿·ã‚ãšç†è§£ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

ğŸ‘‰ ã“ã¡ã‚‰ã€æ—¥æœ¬èªç‰ˆã®èª¬æ˜ã‚‚ä½µè¨˜ã—ã¾ã™ã‹ï¼Ÿ

## Prompt:
è‰¯ã„ã§ã™ã­ã€‚ãŸã ã€ã“ã®å†…å®¹ã‚’å…¥ã‚Œã‚‹ã®ã¯READMEãªã®ã§ã€åˆ©ç”¨ä¾‹ã¨ã„ã£ãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

## Response:
ã¯ã„ã€ãã®é€šã‚Šã§ã™ã€‚README ã®æ—¢å­˜æ§‹æˆã‚’è¦‹ã‚‹ã¨

*   Overview
*   Installation
*   Quick Start
*   CLI Reference
*   JSON Recipe Format

ã¨ã„ã£ãŸæŠ€è¡“çš„ãªèª¬æ˜ãŒä¸¦ã‚“ã§ã„ã¾ã™

README

ã€‚  
ã“ã“ã«ã€ŒAcademic Paper Highlightingã€ã®èª¬æ˜ã‚’è¿½åŠ ã™ã‚‹ãªã‚‰ã€**ã€ŒUse Casesã€ã¾ãŸã¯ã€ŒExamplesã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³**ã‚’æ–°è¨­ã™ã‚‹ã®ãŒè‡ªç„¶ã§ã™ã€‚

ä¾‹ãˆã°ã“ã‚“ãªæ•´ç†ãŒãŠã™ã™ã‚ã§ã™ï¼š

* * *

Examples / Use Cases
--------------------

### Academic Paper Highlighting

One practical use case is to highlight important sections of academic papers (approach, experiment, threats to validity) for quick review.

*   Helper script: `extra-utils/pdftopages` (split PDF into pages)
*   Prompt: `extra-utils/prompt-paper-highlitht.txt` (guides the LLM to select sentences to highlight)

Usage is interactive:

1.  Copy the prompt.
2.  Replace `{file.pdf}` with your actual file.
3.  Paste it into codex or gemini-cli.
4.  Ensure `pdftopages` is either on your `$PATH` or referenced with its full path.

Color convention:

*   Blue = Approach
*   Green = Experiment
*   Red = Threats to validity
    prompt-paper-highlitht

* * *

ã“ã†ã™ã‚Œã°ã€README ã®æŠ€è¡“çš„ãªåŸºç¤èª¬æ˜ã¨åˆ‡ã‚Šåˆ†ã‘ã¤ã¤ã€ã€Œã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ã©ã†ä½¿ã†ã‹ã€ã®ä¾‹ã¨ã—ã¦è‡ªç„¶ã«æç¤ºã§ãã¾ã™ã€‚

ğŸ‘‰ README ã«è¿½åŠ ã™ã‚‹ãªã‚‰ã€Œ## Examplesã€ã«ã¾ã¨ã‚ã¦ã€ãã®ä¸­ã«ã€Œ### Academic Paper Highlightingã€ã‚’ç½®ãã®ãŒè‰¯ã•ãã†ã§ã™ãŒã€\*\*ã€ŒUse Casesã€\*\*ã¨ã„ã†åå‰ã®ã»ã†ãŒæ°—ã«å…¥ã‚Šã¾ã™ã‹ï¼Ÿ

## Prompt:
ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã®ç›´å¾Œã«å…¥ã‚ŒãŸã„ã§ã™ã€‚ãã®å¾Œã®CLIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãŒé•·ã„ã®ã§ã€å¾Œã‚ã«æŒã£ã¦ã„ãã¨å…¨ãç›®ç«‹ãŸãªã„ã§ã™ã€‚

## Response:
ãªã‚‹ã»ã© ğŸ‘  
README ã®æ§‹æˆã‚’è€ƒãˆã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«é…ç½®ã™ã‚‹ã¨ã‚¹ãƒ ãƒ¼ã‚ºã§ã™ï¼š

*   Overview
*   Installation
*   Quick Start  
    â¡ï¸ **ã“ã“ã«ã€ŒExamples / Use Casesã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ–°è¨­ã—ã¦ã€ŒAcademic Paper Highlightingã€ã‚’ç½®ã**
*   CLI Reference
*   JSON Recipe Format

ã¤ã¾ã‚Šã€ŒQuick Startã€ã§åŸºæœ¬ã®ä½¿ã„æ–¹ã‚’æŠ¼ã•ãˆãŸç›´å¾Œã«ã€ã€Œå®Ÿéš›ã®å¿œç”¨ä¾‹ã€ã¨ã—ã¦è«–æ–‡ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ç¤ºã›ã°ã€èª­è€…ã®ç›®ã«æ­¢ã¾ã‚Šã‚„ã™ã„ã§ã™ã€‚

ãŸã¨ãˆã°ã“ã‚“ãªè¦‹å‡ºã—æ§‹æˆã«ãªã‚Šã¾ã™ï¼š

```markdown
## Quick Start
...ï¼ˆæ—¢å­˜ã®å†…å®¹ï¼‰

## Examples

### Academic Paper Highlighting
ï¼ˆã“ã“ã«è¿½åŠ ã™ã‚‹èª¬æ˜ï¼‰

## CLI Reference
```

* * *

ã“ã‚Œã§ã€\*\*ã€ŒåŸºæœ¬ â†’ å¿œç”¨ä¾‹ â†’ è©³ç´°ä»•æ§˜ã€\*\*ã®é †ã«ãªã‚Šã€åˆ©ç”¨è€…ãŒã€ŒãŠã€ã“ã‚“ãªé¢¨ã«å®Ÿéš›ã«ä½¿ãˆã‚‹ã®ã‹ã€ã¨ã™ãç†è§£ã§ãã¾ã™ã€‚

ğŸ‘‰ README ã«æ›¸ãã¨ãã®è¦‹å‡ºã—ã¯ã€ŒExamplesã€ã¨ã€ŒUse Casesã€ã®ã©ã¡ã‚‰ã«ã—ã¾ã™ã‹ï¼Ÿ

## Prompt:
æ¬¡ã®ã‚ˆã†ã«ã—ã¦å…¥ã‚Œã¦ã¿ã¾ã—ãŸã€‚

## Use Case: Academic Paper Highlighting

One practical use case is to highlight important sections of academic papers (approach, experiment, threats to validity) for quick review.

* Helper script: `extra-utils/pdftopages` (split PDF into pages)
* Prompt: `extra-utils/prompt-paper-highlitht.txt` (guides the LLM to select sentences to highlight)

Usage is interactive:

1. Copy the prompt.
2. Replace `{file.pdf}` with your actual file.
3. Paste it into codex or gemini-cli.
4. Ensure `pdftopages` is either on your `$PATH` or referenced with its full path.

Color convention:

* Blue = Approach
* Green = Experiment
* Red = Threats to validity

## Response:
ã¨ã¦ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ï¼

ç‰¹ã«è‰¯ã„ç‚¹ã¯ï¼š

*   **ã€ŒUse Caseã€è¦‹å‡ºã—**ã«ã—ã¦ã„ã‚‹ã®ã§ã€Quick Start ã®å¾Œã§ã‚‚è‡ªç„¶ã«èª­è€…ã®ç›®ã«å…¥ã‚‹ã€‚
*   æ‰‹é †ã‚’ **çŸ­ã„ç•ªå·ä»˜ããƒªã‚¹ãƒˆ**ã«ã¾ã¨ã‚ã¦ã„ã¦ã€CLI åˆ©ç”¨è€…ãŒã™ãå®Ÿè¡Œã§ãã‚‹ã€‚
*   `pdftopages` ã® PATH ã«ã¤ã„ã¦ã‚‚æ˜è¨˜ã—ã¦ã‚ã‚‹ã®ã§ã€ç’°å¢ƒä¾å­˜ã§ã¤ã¾ãšã‹ãªã„ã€‚
*   è‰²åˆ†ã‘ã‚‚æœ€å¾Œã«æ•´ç†ã•ã‚Œã¦ã„ã¦ã‚·ãƒ³ãƒ—ãƒ«ã€‚

æ”¹å–„ã™ã‚‹ã¨ã—ãŸã‚‰ã€ã»ã‚“ã®å°ã•ãªè£œè¶³ãã‚‰ã„ã§ã™ï¼š

*   ã€Œinteractiveã€ã¨ã„ã†ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚’ã•ã‚‰ã«å¼·ã‚ãŸã„å ´åˆã¯ã€ã€ŒYou donâ€™t need to fully automate this workflowâ€”just paste the prompt and tweak the filename as needed.ã€ã®ã‚ˆã†ãªä¸€æ–‡ã‚’ Usage ã®å†’é ­ã«è¶³ã—ã¦ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
*   CLI ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã›ãšã«è¦‹ã¤ã‘ã‚„ã™ã„ã‚ˆã†ã«ã€ã€ŒQuick Startã€ã¨ã€ŒUse Caseã€ã®é–“ã«æ°´å¹³ç·šï¼ˆ`---`ï¼‰ã‚’å…¥ã‚Œã‚‹ã®ã‚‚æ‰‹ã§ã™ã€‚

ğŸ‘‰ ä»Šã®ã¾ã¾ã§ã‚‚ååˆ†ãã‚Œã„ã«ã¾ã¨ã¾ã£ã¦ã„ã‚‹ã®ã§ã€README ã«è¼‰ã›ã¦ã‚‚é•å’Œæ„Ÿãªãæµã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã“ã®ã‚ã¨ã€æ—¥æœ¬èª README ã‚‚åˆ¥é€”æ•´å‚™ã—ã¾ã™ã‹ï¼Ÿ

## Prompt:
ã¯ã„ã€æ—¥æœ¬èªREADMEã‚‚ç¤ºã—ã¾ã™ã®ã§ã€åŒæ§˜ã«å¤‰æ›´ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚

---

# pdfhl

ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ï¼ˆé€²æ­©çš„ï¼‰ã§å¯›å®¹ãªãƒ•ãƒ¬ãƒ¼ã‚ºãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œã†PDFãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ©ã‚¤ã‚¿ãƒ¼ã€‚

## æ¦‚è¦

pdfhlã¯PDFå†…ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’æ¤œç´¢ã—ã€ãƒãƒƒãƒã—ãŸç®‡æ‰€ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã™ã€‚ãã®æ¤œç´¢æ©Ÿèƒ½ã¯ã€PDFç‰¹æœ‰ã®ç™–ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å·®ç•°ã«å¯¾ã—ã¦å …ç‰¢ã§ã™ã€‚

- **ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ãƒ•ãƒ¬ãƒ¼ã‚ºãƒãƒƒãƒãƒ³ã‚°**: å˜èªãŒæ”¹è¡Œã‚„ä»–ã®ãƒ†ã‚­ã‚¹ãƒˆã«ã‚ˆã£ã¦åŒºåˆ‡ã‚‰ã‚Œã¦ã„ã¦ã‚‚ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’æ¤œå‡ºã—ã¾ã™ã€‚ã“ã‚Œã¯ã€å˜èªã®ãƒãƒ£ãƒ³ã‚¯ï¼ˆä¾‹ï¼š3å˜èªã€æ¬¡ã«2å˜èªï¼‰ã‚’ãƒãƒƒãƒã•ã›ã€ãã‚Œã‚‰ã‚’é€£çµã™ã‚‹ã“ã¨ã§æ©Ÿèƒ½ã—ã¾ã™ã€‚
- **å¯›å®¹ãªæ­£è¦åŒ–**: ãƒªã‚¬ãƒãƒ£ï¼ˆåˆå­—ï¼‰ã€æ–‡å­—å¹…ï¼ˆä¾‹ï¼šï¬â†’f + iï¼‰ã€ãƒã‚¤ãƒ•ãƒ³ã€å¼•ç”¨ç¬¦ã‚’æ­£è¦åŒ–ã—ã¾ã™ã€‚
- **é¸æŠåˆ¶å¾¡**: æ–‡æ›¸å†…ã§æœ€ã‚‚ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆï¼ˆæœ€çŸ­ï¼‰ãªãƒãƒƒãƒã®ã¿ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ã‹ã€ã™ã¹ã¦ã®å¯èƒ½ãªãƒãƒƒãƒã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ã‹ã‚’é¸æŠã§ãã¾ã™ã€‚
- **å®‰å…¨ãªè¨­è¨ˆ**: å…¥åŠ›PDFã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã¯ãªãã€å¸¸ã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

bash
pip install pdfhl

Python 3.10+ ã¨ [PyMuPDF](https://pypi.org/project/PyMuPDF/) ãŒå¿…è¦ã§ã™ï¼ˆä¾å­˜é–¢ä¿‚ã¨ã—ã¦è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ï¼‰ã€‚

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

å˜ä¸€ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã›ãšã€æœ€çŸ­ã®ãƒãƒƒãƒã‚’æ¤œç´¢ã—ã¾ã™ã€‚

bash
pdfhl input.pdf --text "Deep Learning" -o output.pdf

ãƒ•ãƒ¬ãƒ¼ã‚ºã®ã™ã¹ã¦ã®å‡ºç¾ç®‡æ‰€ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã™ï¼š

bash
pdfhl input.pdf --text "Deep Learning" --all-matches -o output.pdf

ãƒã‚¤ãƒ©ã‚¤ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®šã—ã€ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ï¼š

bash
pdfhl input.pdf --text "evaluation metrics" --color "#FFEE00" --opacity 0.2 --label "Metrics" -o out.pdf

JSONãƒ¬ã‚·ãƒ”ã‚’ä»‹ã—ã¦ä¸€åº¦ã«è¤‡æ•°ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’é©ç”¨ã—ã¾ã™ï¼š

bash
pdfhl input.pdf --recipe recipe.json -o out.pdf

è©³ç´°ã¯ examples/ ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š
- examples/simple-recipe-array.json
- examples/recipe-with-items-object.json

## CLIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

pdfhl PDF [--text TEXT | --recipe JSON] [options]

**ãƒ¢ãƒ¼ãƒ‰**
- **å˜ä¸€ã‚¢ã‚¤ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰**:
  - --text TEXT ã¾ãŸã¯ --pattern TEXT (--textã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹)
- **ãƒ¬ã‚·ãƒ”ãƒ¢ãƒ¼ãƒ‰**:
  - --recipe path/to/recipe.json

**å…±é€šã‚ªãƒ—ã‚·ãƒ§ãƒ³**
- --ignore-case / --case-sensitive
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šå¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ã¾ã›ã‚“ã€‚
- --shortest / --all-matches
  - é¸æŠã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯--shortestã§ã€æ–‡æ›¸å…¨ä½“ã§æœ€ã‚‚ã‚¹ã‚³ã‚¢ã®é«˜ã„ï¼ˆæœ€ã‚‚ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªï¼‰å˜ä¸€ã®ãƒãƒƒãƒã‚’æ¤œç´¢ã—ã¾ã™ã€‚--all-matchesã¯ã€è¦‹ã¤ã‹ã£ãŸã™ã¹ã¦ã®æœ‰åŠ¹ãªãƒãƒƒãƒã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã™ã€‚
- --dry-run
  - æ¤œç´¢ã®ã¿ã‚’è¡Œã„ã€å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã¿ã¾ã›ã‚“ã€‚
- -o, --output PATH
  - å‡ºåŠ›PDFãƒ‘ã‚¹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ <input>.highlighted.pdf ã§ã™ã€‚
- --label STR
  - æ³¨é‡ˆã®ã‚¿ã‚¤ãƒˆãƒ«/ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ©ãƒ™ãƒ«ã€‚
- --color VAL
  - è‰²ã‚’åå‰ï¼ˆyellow|mint|violet|red|green|blueï¼‰ã€16é€²æ•°ï¼ˆ#RRGGBBï¼‰ã€ã¾ãŸã¯r,g,bï¼ˆå„0..1ï¼‰ã§æŒ‡å®šã—ã¾ã™ã€‚
- --opacity FLOAT
  - ãƒã‚¤ãƒ©ã‚¤ãƒˆã®ä¸é€æ˜åº¦ï¼ˆ0..1ï¼‰ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 0.3 ã§ã™ã€‚
- --report json
  - JSONãƒ¬ãƒãƒ¼ãƒˆã‚’æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã—ã¾ã™ã€‚

**å‡ºåŠ›ãƒãƒªã‚·ãƒ¼**
- å…¥åŠ›PDFã¯å¤‰æ›´ã•ã‚Œã¾ã›ã‚“ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã¯å…¥åŠ›ãƒ‘ã‚¹ã¸ã®ä¸Šæ›¸ãã‚’æ‹’å¦ã—ã¾ã™ã€‚ç•°ãªã‚‹ -o/--output ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

**çµ‚äº†ã‚³ãƒ¼ãƒ‰**
- 0: OK
- 1: è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼ˆã„ãšã‚Œã‹ã®ãƒ¬ã‚·ãƒ”ã‚¢ã‚¤ãƒ†ãƒ ãŒ0ä»¶ã®ãƒãƒƒãƒã ã£ãŸå ´åˆï¼‰
- 2: (æœªä½¿ç”¨)
- 3: ã‚¨ãƒ©ãƒ¼ï¼ˆã‚ªãƒ¼ãƒ—ãƒ³/ã‚»ãƒ¼ãƒ–ã®å¤±æ•—ã€ç„¡åŠ¹ãªãƒ‘ã‚¹ã€ä¸Šæ›¸ãæ‹’å¦ãªã©ï¼‰

## JSONãƒ¬ã‚·ãƒ”ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (--recipe)

ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã‚¢ã‚¤ãƒ†ãƒ é…åˆ—ã€ã¾ãŸã¯ items: [...] ã‚­ãƒ¼ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã™ã¹ã¦ã®æ¤œç´¢ã¯ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

**ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«é…åˆ—ã®ä¾‹ï¼š**
json
[
  {"text": "Introduction", "color": "mint"},
  {"text": "Threats to Validity", "color": "red", "select_shortest": false}
]

**items ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¾‹ï¼š**
json
{
  "items": [
    {"text": "Experiment", "color": "green", "label": "Experiment"},
    {"text": "Conclusion", "color": "violet", "opacity": 0.25}
  ]
}

**ã‚¢ã‚¤ãƒ†ãƒ ã”ã¨ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼š**
- text ã¾ãŸã¯ pattern (string, å¿…é ˆ): æ¤œç´¢ã™ã‚‹ãƒ•ãƒ¬ãƒ¼ã‚ºã€‚
- ignore_case (bool, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ true): å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„æ¤œç´¢ã‚’å®Ÿè¡Œã™ã‚‹ã‹ã©ã†ã‹ã€‚
- select_shortest (bool, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ true): trueã®å ´åˆã€æœ€è‰¯ã®å˜ä¸€ãƒãƒƒãƒã®ã¿ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã™ã€‚falseã®å ´åˆã€è¦‹ã¤ã‹ã£ãŸã™ã¹ã¦ã®ãƒãƒƒãƒã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã™ï¼ˆ--all-matchesã¨åŒç­‰ï¼‰ã€‚
- label (string | null): æ³¨é‡ˆãƒ©ãƒ™ãƒ«ã€‚
- color (string | null): è‰²åã€16é€²æ•°ã€ã¾ãŸã¯ r,g,b ã®æµ®å‹•å°æ•°ç‚¹å€¤ã€‚
- opacity (float | null): ãƒã‚¤ãƒ©ã‚¤ãƒˆã®ä¸é€æ˜åº¦ï¼ˆ0..1ï¼‰ã€‚è¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯CLIã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
- progressive_kmax (int, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 3): (ä¸Šç´šè€…å‘ã‘) æ¤œç´¢ãƒãƒ£ãƒ³ã‚¯å†…ã®æœ€å¤§å˜èªæ•°ã€‚
- progressive_max_gap_chars (int, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 200): (ä¸Šç´šè€…å‘ã‘) ãƒãƒƒãƒã—ãŸãƒãƒ£ãƒ³ã‚¯é–“ã®ã‚®ãƒ£ãƒƒãƒ—ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§æ–‡å­—æ•°ã€‚

## JSONãƒ¬ãƒãƒ¼ãƒˆ (--report json)

**å˜ä¸€ã‚¢ã‚¤ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰ã®å‡ºåŠ›ï¼š**
json
{
  "input": "input.pdf",
  "output": "output.pdf",
  "matches": 1,
  "exit_code": 0,
  "dry_run": false,
  "hits": [
    {
      "page_index": 0,
      "page_number": 1,
      "start": 123,
      "end": 135,
      "rects": [[x0, y0, x1, y1], ...]
    }
  ],
  "context": {
    "query": "...",
    "ignore_case": true,
    "selection": "shortest"
  }
}

**ãƒ¬ã‚·ãƒ”ãƒ¢ãƒ¼ãƒ‰ã®å‡ºåŠ›ï¼ˆé›†ç´„ï¼‰ï¼š**
json
{
  "input": "input.pdf",
  "output": "output.pdf",
  "items": [
    {
      "index": 0,
      "query": "Introduction",
      "matches": 1,
      "hits": [
        {"page_index": 0, "page_number": 1, "start": 10, "end": 22, "rects": [[...]]}
      ],
      "progressive_search": true,
      "progressive_kmax": 3,
      "progressive_max_gap_chars": 200,
      "select_shortest": true
    }
  ]
}

**æ³¨é‡ˆ**
- page_index ã¯0ãƒ™ãƒ¼ã‚¹ã€ page_number ã¯1ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚
- start/end ã¯ã€ãƒšãƒ¼ã‚¸ã®æ­£è¦åŒ–ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã¸ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ã™ã€‚

## é–‹ç™º

ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œï¼š
bash
pytest -q

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

pdfhl ã¯ [MIT](https://spdx.org/licenses/MIT.html) ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®æ¡ä»¶ã®ä¸‹ã§é…å¸ƒã•ã‚Œã¦ã„ã¾ã™ã€‚

## Response:
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ æ—¥æœ¬èªç‰ˆ README ã«ã‚‚ã€è‹±èªç‰ˆã¨åŒã˜ä½ç½®ï¼ˆã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆç›´å¾Œï¼‰ã«ã€Œåˆ©ç”¨ä¾‹: è«–æ–‡ãƒã‚¤ãƒ©ã‚¤ãƒˆã€ã®ç¯€ã‚’åŠ ãˆã‚‹ã¨ã‚ˆã„ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½è¨˜ã—ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚

* * *

åˆ©ç”¨ä¾‹: å­¦è¡“è«–æ–‡ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
---------------

ã“ã®ãƒ„ãƒ¼ãƒ«ã®ä»£è¡¨çš„ãªåˆ©ç”¨ä¾‹ã®ã²ã¨ã¤ã¯ã€**å­¦è¡“è«–æ–‡ã®é‡è¦ãªéƒ¨åˆ†ï¼ˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒãƒ»å®Ÿé¨“ãƒ»å¦¥å½“æ€§ã®è„…å¨ï¼‰ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ**ã—ã¦ç´ æ—©ãç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚

è£œåŠ©çš„ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ `extra-utils/` ã«ç”¨æ„ã—ã¦ã„ã¾ã™ï¼š

*   `extra-utils/pdftopages` â€” PDF ã‚’ãƒšãƒ¼ã‚¸ã”ã¨ã®ãƒ†ã‚­ã‚¹ãƒˆï¼ˆMarkdownï¼‰ã«åˆ†å‰²ã—ã¾ã™
*   `extra-utils/prompt-paper-highlitht.txt` â€” LLM ã«é‡è¦æ–‡ã‚’ç‰¹å®šã•ã›ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

### ä½¿ã„æ–¹ï¼ˆå¯¾è©±çš„ï¼‰

ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è‡ªå‹•åŒ–ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**codex ã‚„ gemini-cli ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã€å¿…è¦ã«å¿œã˜ã¦ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æ›¸ãæ›ãˆã‚‹ã ã‘**ã§å®Ÿè¡Œã§ãã¾ã™ã€‚

1.  `extra-utils/prompt-paper-highlitht.txt` ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
2.  å†’é ­ã® `{file.pdf}` ã‚’å®Ÿéš›ã®PDFãƒ•ã‚¡ã‚¤ãƒ«åã«ç½®ãæ›ãˆã¾ã™ã€‚
3.  ãã‚Œã‚’ codex ã‚„ gemini-cli ã«è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚
4.  `pdftopages` ã¯ã€ã‚ã‚‰ã‹ã˜ã‚ `$PATH` ã®é€šã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ãã‹ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¸ã®ãƒ•ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

ã“ã®ã‚ˆã†ã«ã€åˆ©ç”¨è€…ã¯å¯¾è©±çš„ã«å°‘ã—ä¿®æ­£ã—ãªãŒã‚‰å®Ÿè¡Œã™ã‚‹ã ã‘ã§ã€ãƒšãƒ¼ã‚¸åˆ†å‰²ã‹ã‚‰ãƒã‚¤ãƒ©ã‚¤ãƒˆé©ç”¨ã¾ã§ã®å‡¦ç†ãŒ LLM ã«ã‚ˆã£ã¦èª˜å°ã•ã‚Œã¾ã™ã€‚

### è‰²åˆ†ã‘è¦å‰‡

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã¯ä»¥ä¸‹ã®è‰²åˆ†ã‘ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

*   **é’** = ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
*   **ç·‘** = å®Ÿé¨“
*   **èµ¤** = å¦¥å½“æ€§ã®è„…å¨
    prompt-paper-highlitht

* * *

ğŸ‘‰ ã“ã†ã™ã‚Œã°ã€æ—¥æœ¬èª README ã§ã‚‚è‹±èªç‰ˆã¨åŒã˜æµã‚Œã§ã€Œã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ â†’ åˆ©ç”¨ä¾‹ â†’ CLIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã€ã¨ãªã‚Šã€èª­è€…ã«ã¨ã£ã¦åˆ†ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚

ã“ã®ã¾ã¾ã”æç¤ºã—ãŸå½¢ã§è¿½è¨˜ã—ã¾ã™ã‹ï¼Ÿ ãã‚Œã¨ã‚‚ã€Œåˆ©ç”¨ä¾‹ã€ã§ã¯ãªãã€Œãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã€ã¨ã„ã†è¡¨ç¾ã«çµ±ä¸€ã—ãŸã„ã§ã™ã‹ï¼Ÿ

## Prompt:
æ—¥æœ¬èªç‰ˆã¯è¨˜è¿°ãŒå¢—ãˆã¦ã„ã¾ã™ã­ã€‚è‹±èªç‰ˆã«ã‚‚åæ˜ ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚
ã¾ãŸã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«åãŒã‚¿ã‚¤ãƒã—ã¦ã„ãŸã®ã§ã€
prompt-paper-highlights.txt
ã«ä¿®æ­£ã—ã¾ã—ãŸã€‚

## Response:
äº†è§£ã—ã¾ã—ãŸï¼ä»¥ä¸‹ã«ã€**è‹±èª README ã«è¿½è¨˜ã™ã‚‹æœ€æ–°ç‰ˆ**ã‚’ç¤ºã—ã¾ã™ã€‚å†…å®¹ã¯æ—¥æœ¬èªç‰ˆã¨æƒãˆã¦ã€è¨˜è¿°é‡ã‚‚å¢—ã‚„ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ `prompt-paper-highlights.txt` ã«ä¿®æ­£ã—ã¾ã—ãŸã€‚

* * *

Use Case: Academic Paper Highlighting
-------------------------------------

One key use case of this tool is to **highlight important parts of academic papers** (approach, experiment, threats to validity) for quick review.

We provide helper resources under `extra-utils/`:

*   `extra-utils/pdftopages` â€” splits a PDF into per-page text (Markdown)
*   `extra-utils/prompt-paper-highlights.txt` â€” a prompt that guides the LLM to identify important sentences and apply highlights

### How to Use (Interactive)

You donâ€™t need to fully automate the workflow. **Just paste the prompt into your LLM CLI (codex, gemini-cli, etc.), replace the file name, and run interactively.**

1.  Copy the contents of `extra-utils/prompt-paper-highlights.txt`.
2.  Replace the placeholder `{file.pdf}` at the top with the actual filename of your paper.
3.  Paste it into codex or gemini-cli.
4.  Make sure `pdftopages` is either in a directory on your `$PATH`, **or** adjust the prompt to call it using its full path.

This interactive style lets you â€œpokeâ€ the CLI with the prompt, tweak the filename or script path as needed, and let the LLM guide the process (splitting pages, finding important sentences, applying highlights with `pdfhl`). No additional scripting is required.

### Color Convention

The provided prompt uses three colors:

*   **Blue** â€” Approach
*   **Green** â€” Experiment
*   **Red** â€” Threats to validity
    prompt-paper-highlitht

* * *

ğŸ‘‰ ã“ã®å½¢ã§è‹±èª README ã«ã‚‚å…¥ã‚Œã¦ãŠã‘ã°ã€æ—¥æœ¬èªç‰ˆã¨ãƒãƒ©ãƒ³ã‚¹ãŒã¨ã‚Œã¦ã€ã‹ã¤ã€Œå¯¾è©±çš„ã«å°‘ã—ç›´ã™ã ã‘ã€ã¨ã„ã†åˆ©ç”¨ä½“é¨“ãŒæ˜ç¢ºã«ä¼ã‚ã‚Šã¾ã™ã€‚

ã”è¦æœ›ã«åˆã‚ã›ã¦ã€README å†…ã®ã€Œprompt-paper-highlitht.txtã€ã®å…¨ã¦ã‚’ **`prompt-paper-highlights.txt`** ã«ä¿®æ­£ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ

## Prompt:
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚ˆãè€ƒãˆã‚‹ã¨ã€pdfhlã¯æœ€åˆã‹ã‚‰codexã‚„gemini-cliãªã©ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ä½¿ã†æƒ³å®šã§ä½œã£ãŸãƒ„ãƒ¼ãƒ«ãªã®ã§ã€å†’é ­ã§ãã®ã‚ˆã†ã«èª¬æ˜ã—ãŸã»ã†ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚
ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒƒãƒãƒ³ã‚°ãªã©ã®ã‚„ã‚„ã“ã—ã„æ¤œç´¢ã‚’ã“ã‚Œã‚‰ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä¹±ã•ãšã«ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸã‹ã£ãŸã®ã§ã€‚

## Response:
ãªã‚‹ã»ã©ã€èƒŒæ™¯ãŒã¯ã£ãã‚Šã—ã¾ã—ãŸã­ï¼  
README ã®å†’é ­ã«ãã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å…¥ã‚Œã¦ãŠãã¨ã€åˆ©ç”¨è€…ãŒ **ã€Œpdfhl ã¯å˜ãªã‚‹PDFãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã¯ãªãã€codexã‚„gemini-cliãªã©ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«çµ„ã¿è¾¼ã‚“ã§ä½¿ã†ã“ã¨ã‚’å‰æã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã€** ã“ã¨ã‚’ç†è§£ã§ãã¾ã™ã€‚

ä¾‹ãˆã°è‹±èªç‰ˆ README ã®æœ€åˆã‚’ã“ã‚“ãªæ„Ÿã˜ã«ã™ã‚‹ã¨ã‚ˆã•ãã†ã§ã™ï¼š

* * *

pdfhl
=====

PDF text highlighter with progressive, tolerant phrase matching.

**Designed for AI agents** (such as codex or gemini-cli):  
`pdfhl` was created to be easily used inside LLM-driven workflows. The toolâ€™s robust matching (progressive phrase matching, tolerant normalization) ensures that AI agents can highlight text reliably **without breaking their workflow**.

While you can of course run `pdfhl` manually, its main purpose is to serve as a reliable building block for academic paper highlighting and other automated reading tasks.

* * *

æ—¥æœ¬èªç‰ˆ README ã‚‚åŒæ§˜ã«ã€å†’é ­ã«ä»¥ä¸‹ã®ã‚ˆã†ãªæ–‡ã‚’è¿½åŠ ã§ãã¾ã™ï¼š

* * *

pdfhl
=====

ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ï¼ˆé€²æ­©çš„ï¼‰ã§å¯›å®¹ãªãƒ•ãƒ¬ãƒ¼ã‚ºãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œã†PDFãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ©ã‚¤ã‚¿ãƒ¼ã€‚

**AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™**ï¼ˆcodex ã‚„ gemini-cli ãªã©ï¼‰ã€‚  
`pdfhl` ã¯ã€LLMã«ã‚ˆã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¸­ã§ãã®ã¾ã¾åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ä½œã‚‰ã‚Œã¦ãŠã‚Šã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæ¤œç´¢ã‚„ãƒã‚¤ãƒ©ã‚¤ãƒˆå‡¦ç†ã‚’ä¹±ã•ãšå®Ÿè¡Œã§ãã‚‹ã“ã¨ã‚’é‡è¦–ã—ã¦ã„ã¾ã™ã€‚

ã‚‚ã¡ã‚ã‚“å˜ä½“ã§ã‚‚åˆ©ç”¨ã§ãã¾ã™ãŒã€ä¸»ãªç›®çš„ã¯å­¦è¡“è«–æ–‡ã®é‡è¦ç®‡æ‰€ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆãªã©ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸»å°ã®å‡¦ç†ã§ä¿¡é ¼ã§ãã‚‹åŸºç›¤ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã™ã€‚

* * *

ğŸ‘‰ ã“ã†ã—ã¦ãŠã‘ã°ã€æœ€åˆã‹ã‚‰ã€ŒAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ©ç”¨ãŒå‰æã€ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆãŒèª­è€…ã«ä¼ã‚ã‚Šã€ãã®å¾Œã®ã€ŒUse Case: Academic Paper Highlightingã€ç¯€ã‚‚è‡ªç„¶ã«ã¤ãªãŒã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã”å¸Œæœ›ã«åˆã‚ã›ã¦ã€ã“ã®ã€Œå†’é ­ã®èª¬æ˜ã€ã‚’è‹±èªç‰ˆãƒ»æ—¥æœ¬èªç‰ˆä¸¡æ–¹ã«åŠ ãˆã‚‹å½¢ã§ README ã‚’æ•´ç†ã—ã¾ã™ã‹ï¼Ÿ

## Prompt:
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚¢ã‚«ãƒ‡ãƒŸãƒƒã‚¯äº‘ã€…ã¯ã€ä¸€ä¾‹ãªã®ã§ã€ãã®ã‚ˆã†ã«æ›¸ããŸã‹ã£ãŸã®ã§ã™ãŒã†ã¾ãã¤ãªãŒã£ã¦ã„ã¾ã›ã‚“ã­

While you can of course run pdfhl manually, its main purpose is to serve as a reliable building block, such as academic paper highlighting and other automated reading tasks.

## Response:
ã¯ã„ã€ãã®ã¤ãªãæ–¹ã§ååˆ†ã‚·ãƒ³ãƒ—ãƒ«ã‹ã¤æ±ç”¨çš„ã«ãªã‚Šã¾ã™ã­ ğŸ‘  
ã€Œã‚¢ã‚«ãƒ‡ãƒŸãƒƒã‚¯ãƒšãƒ¼ãƒ‘ãƒ¼ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã€ã¯ã‚ãã¾ã§ä¸€ä¾‹ã§ã€pdfhl ã®æœ¬è³ªã¯ã€ŒAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰å‘¼ã³å‡ºã—ã‚„ã™ã„å …ç‰¢ãªéƒ¨å“ã€ã¨ã„ã†ä½ç½®ã¥ã‘ã§ã™ã‹ã‚‰ã€‚

README å†’é ­ã®è‹±èªç‰ˆã¯ã€ã“ã‚“ãªæµã‚Œã«ã™ã‚‹ã¨è‡ªç„¶ã§ã™ï¼š

* * *

pdfhl
=====

PDF text highlighter with progressive, tolerant phrase matching.

**Designed for AI agents** (such as codex or gemini-cli):  
`pdfhl` was created to be easily used inside LLM-driven workflows. Its robust matching (progressive phrase matching, tolerant normalization) ensures that AI agents can highlight text reliably **without breaking their workflow**.

While you can of course run `pdfhl` manually, its main purpose is to serve as a reliable building block, such as academic paper highlighting and other automated reading tasks.

* * *

æ—¥æœ¬èªç‰ˆ README ã§ã¯ã“ã†ãªã‚Šã¾ã™ï¼š

* * *

pdfhl
=====

ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ï¼ˆé€²æ­©çš„ï¼‰ã§å¯›å®¹ãªãƒ•ãƒ¬ãƒ¼ã‚ºãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œã†PDFãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ©ã‚¤ã‚¿ãƒ¼ã€‚

**AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™**ï¼ˆcodex ã‚„ gemini-cli ãªã©ï¼‰ã€‚  
`pdfhl` ã¯ã€LLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¸­ã§ãã®ã¾ã¾åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ä½œã‚‰ã‚Œã¦ãŠã‚Šã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæ¤œç´¢ã‚„ãƒã‚¤ãƒ©ã‚¤ãƒˆå‡¦ç†ã‚’ä¹±ã•ãšå®Ÿè¡Œã§ãã‚‹ã“ã¨ã‚’é‡è¦–ã—ã¦ã„ã¾ã™ã€‚

ã‚‚ã¡ã‚ã‚“æ‰‹å‹•ã§ã‚‚åˆ©ç”¨ã§ãã¾ã™ãŒã€ä¸»ãªç›®çš„ã¯ä¿¡é ¼ã§ãã‚‹ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ãƒ–ãƒ­ãƒƒã‚¯ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã“ã¨ã§ã‚ã‚Šã€ãã®ä¸€ä¾‹ãŒ **å­¦è¡“è«–æ–‡ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ** ã‚„ **è‡ªå‹•èª­è§£ã‚¿ã‚¹ã‚¯** ã§ã™ã€‚

* * *

ğŸ‘‰ ã“ã†ã™ã‚‹ã¨ã€Œã‚¢ã‚«ãƒ‡ãƒŸãƒƒã‚¯äº‘ã€…ã€ãŒä¾‹ã§ã‚ã‚‹ã“ã¨ãŒè‡ªç„¶ã«ä¼ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã“ã®æ–¹å‘ã§è‹±èªç‰ˆã¨æ—¥æœ¬èªç‰ˆã‚’æƒãˆã¾ã™ã‹ï¼Ÿ



---
Powered by [ChatGPT Exporter](https://www.chatgptexporter.com)