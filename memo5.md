> 作業完了です。要約の保存とハイライト付きPDFの生成を行いました。

  - 要約ファイル: kbse-202405-kamiya.summaries.txt
  - ハイライト付きPDF: kbse-202405-kamiya.highlighted.pdf
  - 使用レシピ: kbse-202405-kamiya.pdfhl.json
  - 実行レポート: .pdfhl-report.json

  要約（ダイジェスト）

  - 背景: LLMのコンテキスト長制限がソフトウェア開発タスクでの活用を妨げる。長文投入で推論性能低下の
  傾向。
  - 提案手法: 実行トレースに基づき、呼び出し順を反映したコールツリーと関連関数のソースを抽出し、問い
  合わせ文に付加してLLMに与えるRAG。スタートアップ処理の枝刈り等を実装。
  - 実験: rich-cli（依存含め約22万行）を対象に、Gemini 1.5 Pro/Claude 3 Sonnet/ChatGPT-4でプロンプト
  変種を比較。著者が4点満点で評価。
  - 結果: コールツリー＋関数ソースの付与で応答品質が概ね向上。呼び出し順の保持が有効。一部LLMでは長大
  プロンプトで品質低下の事例も。
  - 限界・今後: 1回実行・目視評価・対象限定などの制約。プロンプト生成の自動化や適用タスク拡張、長文対
  処の改善が必要。

  ハイライト方針

  - 青（アプローチ）: 提案手法やRAG・長文制限に関する英語要約のセンテンス等
  - 緑（実験）: 実験対象（rich-cli）に関するセンテンス
  - 赤（妥当性の脅威）: 査読無しの技報である旨など、限界・妥当性に関わるセンテンス

  注意点

  - 当該PDFは文字エンコードの都合で日本語の短語検索がヒットしにくく、pdfhlのマッチングが限定的でし
  た。英語要約のセンテンスやASCIIを含む日本語フレーズを中心に確実にマッチする項目で色分けしました（各
  色でヒット確認済み）。およそ5%は未満ですが、確実なハイライトを優先しています。
  - もしハイライト量を増やしたい場合、追加で一致しやすいフレーズ（特に英語要約部やASCII語を含む日本語
  フレーズ）をレシピに足せます。必要なら追補します。

▌ハイライトをつけそこねた部分はありますか

> はい。日本語本文の多くがPDF内テキストの符号化の影響で検索にヒットせず、次のような部分は未ハイライト
  です。

  - アプローチ（青）
      - 「3. アプローチ」節のステップ説明（例: 実行トレース→コールツリー化→関数ソース抽出→プロンプト
  に付加）
      - 呼び出し順の保持や枝刈りなどの実装上の工夫
  - 実験（緑）
      - 「4. 実験」節の対象・LLM・プロンプト変種・評価基準の説明や各プロンプト結果の叙述
      - 表や図の説明文（「表4/5/6/7」「図2」周辺の本文）
  - 妥当性の脅威（赤）
      - 乱数性・各条件1回のみ・評価は傾向に留まる旨
      - 長大プロンプトで品質低下の可能性、トークナイザー差、今後の課題 など

  今回確実にハイライトできたのは、PDF内で英数字主体のテキスト（英語要約の一部、rich-cli の説明、一部
  の英語注意書き）です。日本語短語（例: LLM, プロンプト, コールツリー 等）はPDFの文字エンコード/合字
  の影響でヒットしませんでした。

  改善案（すぐ対応可）

  - 日本語センテンスでも一致しやすい短い断片（PDFで実際にヒット確認できる表現）を追加し、各色の分量を
  増やす。
  - 英語要約・英語注意書きからもアプローチ/実験/脅威に該当する短句を拡充。
  - 必要なら、該当箇所の実PDF表示を見ながら短い一致語を探し、5%に近づくまで追加。

  この方針でレシピを拡張して反映しましょうか？
